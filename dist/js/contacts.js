(()=>{"use strict";const e=e=>{let t=!1;for(let t=0;t<e.length;t++)e[t].value.trim().length<2?e[t].classList.add("error"):e[t].classList.remove("error"),"textarea"===e[t].type&&e[t].classList.remove("error"),e[t].classList.contains("form-phone")&&e[t].value.trim().length<18&&e[t].classList.add("error");for(let r=0;r<e.length;r++){if(e[r].classList.contains("error"))return!1;e[r].classList.contains("error")||(t=!0)}return t};(({idForm:t,idProductСount:r})=>{const n=document.getElementById(t),o=n.querySelectorAll(".entry-field"),a=document.createElement("h3"),l=()=>{setTimeout((()=>{a.textContent=""}),5e3)};try{if(!n)throw new Error("Верните форму на место, пожааааалуйста))");n.addEventListener("input",(()=>{e(o),(()=>{const e=document.querySelector(".form-name"),t=document.querySelector(".form-email");e?e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^а-яё -]/gi,"")})):t&&t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^a-z@\-_.!~*']/gi,"")}))})()})),n.addEventListener("submit",(t=>{t.preventDefault(),e(o)&&(()=>{const e=new FormData(n),t={};var s;n.append(a),a.textContent="Загрузка...",e.forEach(((e,r)=>t[r]=e)),r&&(t.quantity=document.getElementById(r).textContent),(s=t,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((e=>{a.textContent="Спасибо! Наш менеджер с вами свяжется",o.forEach((e=>e.value="")),l()})).catch((e=>{a.textContent="Ошибка...",l()}))})()})),n.append(a)}catch(e){console.log(e.message)}((e,t="+7 (___) ___-__-__")=>{const r=document.querySelectorAll(e),n=e=>{const{keyCode:r,target:n}=e,o=t,a=o.replace(/\D/g,""),l=n.value.replace(/\D/g,"");let s=0,c=o.replace(/[_\d]/g,(e=>s<l.length?l.charAt(s++)||a.charAt(s):e));s=c.indexOf("_"),-1!==s&&(c=c.slice(0,s));let i=o.substr(0,n.value.length).replace(/_+/g,(({length:e})=>`\\d{1,${e}}`)).replace(/[+()]/g,"\\$&");i=new RegExp(`^${i}$`),(!i.test(n.value)||n.value.length<5||r>47&&r<58)&&(n.value=c),"blur"==e.type&&n.value.length<5&&(n.value="")};for(const e of r)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)})(".form-phone")})({idForm:"contact-form"})})();